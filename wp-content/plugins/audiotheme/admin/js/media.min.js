!function(){"use strict";jQuery(function(t){var i,a,o=wp.media.model.Attachment,e=wp.Uploader.defaults.filters.mime_types||[],n={init:function(){t("#wpbody").on("click",".audiotheme-media-control-choose",function(e){e.preventDefault(),e=(i=t(this).closest(".audiotheme-media-control")).data("target")||".audiotheme-media-control-target",a=0===e.indexOf("#")?t(e):i.find(e),i.data("upload-extensions")&&(wp.Uploader.defaults.filters.mime_types=[{title:AudiothemeMediaControl.audioFiles,extensions:i.data("upload-extensions")}]),n.frame().open()})},select:function(){var e=this.get("selection"),t=i.data("return-property")||"id";a.length&&a.val(e.pluck(t)),i.trigger("selectionChange.audiotheme",[e])},updateLibrarySelection:function(){var e,t,i=this.get("library").get("selection");a.length&&(t=a.val())&&""!==t&&-1!==t&&"0"!==t&&(e=o.get(t)).fetch(),i.reset(e?[e]:[])},frame:function(){return this._frame||(this._frame=wp.media({title:i.data("title")||AudiothemeMediaControl.frameTitle,library:{type:i.data("file-type")||"image"},button:{text:i.data("update-text")||AudiothemeMediaControl.frameUpdateText},multiple:i.data("select-multiple")||!1}),this._frame.on("open",this.updateLibrarySelection).on("close",function(){wp.Uploader.defaults.filters.mime_types=e}).state("library").on("select",this.select),this._frame)}};n.init()})}((jQuery,window));