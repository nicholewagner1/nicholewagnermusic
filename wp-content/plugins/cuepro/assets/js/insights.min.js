window.cue=window.cue||{},function(n,u){"use strict";var c,d=n.cue,i=_cueproInsights;function r(){var e,t,n=(t=new RegExp("(?:(?:^|.*;\\s*)"+"cue_cid"+"\\s*\\=\\s*([^;]*).*$)|^.*$"),document.cookie.replace(t,"$1"));return n||(n=Math.floor(2147483647*Math.random())+"."+Math.floor(Date.now()/1e3),(e=new Date).setDate(e.getDate()+365),document.cookie="cue_cid=u"+n+"; expires="+e.toUTCString()+"; path=/"),n}function l(e){var t={};return"cueGetCurrentTrack"in e&&u.extend(t,e.cueGetCurrentTrack()),t.title||(t.title=u(e.node).attr("title")),u.extend({},{currentTime:e.media.currentTime,duration:e.media.duration,src:e.media.src,title:t.title||""})}u.extend(d,{log:function(e){var t=new FormData;t.append("action",e.action),t.append("client_uid",r()),t.append("page_title",u(document).find("title").text()),t.append("page_url",n.location.href),t.append("target_time",e.time),t.append("target_title",e.title),t.append("target_url",e.source),navigator.sendBeacon?navigator.sendBeacon(i.routeUrl,t):u.ajax({url:i.routeUrl,contentType:!1,data:t,processData:!1,type:"POST"})}}),u.extend(MediaElementPlayer.prototype,{buildcueinsights:function(r,e,t,i){var o={},n=u(i),a=!1;"AUDIO"===r.node.tagName&&(n.on("play",_.debounce(function(e){var t=o.play||0,n=l(r),i=Math.round(n.currentTime);(!r.cueAutoResume||t)&&i<2&&(d.log({action:"play",source:n.src,time:i<2?0:i,title:n.title}),a=!1),o.play=t+1},250)),n.on("timeupdate",function(e){var t,n=.2*i.duration;c<n&&i.currentTime>n&&(t=l(r),d.log({action:"listen",source:t.src,time:Math.round(t.currentTime),title:t.title})),c=i.currentTime}),u(r.node).on("skipNext.cue",function(e,t,n){a||d.log({action:"skip",source:t.src,time:Math.round(t.currentTime),title:n.title||""}),a=!0}),n.on("ended",function(e){var t=l(r);d.log({action:"complete",source:t.src,time:Math.round(t.duration),title:t.title})}),n.on("seeked",function(e){var t=o.seek||0,n=l(r);1<Math.round(n.currentTime)&&r.cueAutoResume,o.seek=t+1}),n.on("pause",_.debounce(function(e){var t=l(r);Math.round(t.currentTime),Math.round(t.duration)},250)))}});var e,t=MediaElementPlayer.prototype.init;MediaElementPlayer.prototype.init=function(){-1===this.options.features.indexOf("cueinsights")&&this.options.features.unshift("cueinsights"),t.call(this)},"WPPlaylistView"in n&&(e=n.WPPlaylistView.prototype.renderCurrent,n.WPPlaylistView.prototype.renderCurrent=function(){e.apply(this,arguments),u(this.playerNode).attr("title",this.current.get("title"))})}(window,jQuery);